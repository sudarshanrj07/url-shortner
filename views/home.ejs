<!DOCTYPE html>
<html lang="en">
	<head>
		<style>
			body {
				font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
			}
		</style>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>URL Shortner</title>
	</head>
	<body>
		<h1>URL Shortner</h1>
		<form action="/api/url" method="post">
			<label> Enter your Orginial URL</label>
			<input type="text" name="redirectUrl" placeholder="https://example.com" />
			<button type="submit">Generate</button>
		</form>

		<% if(locals.id) { %>
		<div>
			<p>
				URL Genrated:
				<a
					href="https://shortify-theta-lemon.vercel.app/api/url/<%= id %>"
					target="_blank"
					rel="noopener noreferrer"
					><%= id %></a
				>
			</p>
		</div>
		<% } %>
		<div>
			<% if (locals.urls) {%>
			<table>
				<thead>
					<th>S. No</th>
					<th>ShortID</th>
					<th>Redirect</th>
					<th>clicks</th>
				</thead>
				<tbody>
					<% urls.forEach((url, index) => { %>
					<tr>
						<td><%= index+1 %></td>
						<td>
							<a
								href="https://shortify-theta-lemon.vercel.app/api/url/<%= url.shortId %>"
								target="_blank"
								rel="noopener noreferrer"
								><%= url.shortId%>
							</a>
						</td>
						<td><%= url.redirectUrl%></td>
						<td><%= url.analytics.length%></td>
					</tr>
					<% }) %>
				</tbody>
			</table>

			<% } %>
		</div>
	</body>
</html>
